---
import { urlFor } from "../../lib/sanity";

const { data } = Astro.props;

if (!data) return null;

const { title, content, image, type } = data;

// Determine layout based on type or default
const isReversed = type === "whyOpened" || type === "commitment";
const bgColor =
    type === "commitment" ? "bg-primary text-white" : "bg-white text-gray-800";
const titleColor = type === "commitment" ? "text-white" : "text-primary";
const textColor = type === "commitment" ? "text-gray-100" : "text-gray-600";
---

<section class={`py-24 ${bgColor}`}>
    <div class="container mx-auto px-4">
        <div
            class={`flex flex-col md:flex-row items-center gap-16 ${isReversed ? "md:flex-row-reverse" : ""}`}
        >
            <div class="w-full md:w-1/2">
                {
                    image && (
                        <div class="relative rounded-lg overflow-hidden border border-gray-100 shadow-sm">
                            <img
                                src={urlFor(image).width(800).url()}
                                alt={title}
                                class="w-full h-auto object-cover"
                            />
                        </div>
                    )
                }
            </div>

            <div class="w-full md:w-1/2">
                <h2
                    class="text-3xl md:text-4xl font-bold mb-6 tracking-tight text-primary"
                >
                    {title}
                </h2>
                <div
                    class={`prose prose-lg max-w-none leading-relaxed ${textColor}`}
                >
                    <p class="font-normal text-gray-600">{content}</p>
                </div>
                {
                    type === "whyOpened" && (
                        <div class="mt-8">
                            <a
                                href="#contact"
                                class="btn-primary inline-flex items-center gap-2 text-sm"
                            >
                                Join Our Community
                                <span>&rarr;</span>
                            </a>
                        </div>
                    )
                }
            </div>
        </div>
    </div>
</section>
